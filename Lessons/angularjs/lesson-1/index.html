<!DOCTYPE html>
<html ng-app="myApp">
  <head>
    <meta charset="utf-8">
    <title>Meerkat Dashboard</title>
    <link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.css">
    <script src="../bower_components/angular/angular.js"></script>
  </head>

  <!-- Set the scope of the body element to use the MyController -->
  <body ng-controller="MyController">

    <!-- Binding to the view model to get a heading for the page -->
    <h2>Welcome to {{appTitle}}</h2>

    <!-- Repeating Content -->
    <section class="container">
      <div class="row well" ng-repeat="meerkat in meerkats">
        <img src="{{meerkat.picture_href}}" />
        <div >
          <label>Name:</label> {{meerkat.name}}
          <label>Date of birth:</label> {{meerkat.dateOfBirth}}
          <label>Age:</label> {{calculateAge(meerkat)}}
        </div>
      </div>
    </section>
    <!-- End of Repeating Content -->

    <script language="javascript">
      var myApp = angular.module('myApp', []);

      myApp.controller('MyController', function($scope) {
        // Set a title for our dashboard
        $scope.appTitle = 'The Great Meekat Dashboard!';

        // Add the Meerkats
        var base_url = 'http://cdn.comparethemarket.com/meerkat/0.0.0.0/Templates/Styles/Meerkats/PageFiles';
        $scope.meerkats = [];
        $scope.meerkats.push({
          name: 'Sergei',
          dateOfBirth: '1937-04-10',
          picture_href: base_url + '/115/sergei.png'
        });
        $scope.meerkats.push({
          name: 'Yakov',
          dateOfBirth: '1943-12-20',
          picture_href: base_url + '/109/Yakov.png'
        });
        $scope.meerkats.push({
          name: 'Aleksandr',
          dateOfBirth: '1976-01-21',
          picture_href: base_url + '/113/Alek_profile.png'
        });

        // Calculate the date of birth for a given meerkat
        $scope.calculateAge = function(meerkat) {
          var now = new Date(),
              dob = new Date(meerkat.dateOfBirth);

          return now.getYear() - dob.getYear();
        };
      });
    </script>
  </body>
</html>